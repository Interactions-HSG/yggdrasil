(this["webpackJsonpgui-poc"]=this["webpackJsonpgui-poc"]||[]).push([[0],[,,,,,,,function(t,e){t.exports="data:image/png;base64,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"},,,function(t,e,o){t.exports=o.p+"static/media/Background.7d19d968.png"},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjEuNv1OCegAAAHpSURBVGhD7Zg7ksIwEEQ5hgMHHImAIzjkDj6KAwIHHNJLB6PqbY1K9gIe7a5d9ZKej7oLEAWn57MY4zguz+f0G1DfmaADraK+M0EHWkV9Z4IOtIr6zgQd8Ljf78v1el3O53OafRXswk7s1vM8eHZzkMfjsfR9n/o/Bc7AWXo+w/2bgtxut9S3FzhTfRjctzpIRAijFIZ7VgXBS8w9EXhvM66vCrLHZ6IGPKgvrleD4AbheiR6m3GtGgTXIdcjgRf2xrVqkHd+T7wKvLA3rlWDcK0FSt6OIFGUvP2tIFxUuLkF1B/jioYuikb9Ma5o6KJo1B/jioYuikb9Ma5o6KJo1B/jioYuikb9Ma5o6KJo1B/jioYuikb9Ma5o6KJo1B/jioYuikb9Ma5o6KJo1B/jioYuikb9Ma5o6KJo1B/jioYuikb9Ma5o6KJo1B+DJzUeP6x2ouTtCBJFydv/CdLC/76G/v/LtWqQy+WSatHAC3vjWjXINE2pFg28sDeuVYOArutSPQp4UF9cXxVknudUjwIe1BfXVwUBwzCknr3B2eoHcM/qICAiTCkE4L5NQQBe4j0+MzjDezsx3L85iIEbBNfhO79nsAs79XYqwbM/DtIC6jsTdKBV1Hcm6ECrqO9M0IFW+e57XL4A4fZi6yG4/icAAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAMAAAGhhLFkAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAACi6JeHDe4AAAABdFJOUwBA5thmAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAxUlEQVQ4T7WPWxKAIAzE9P6Xto+AVFuRGc2HbMOCujV2IS6yMsmqT6dv7OF5lhgpKWNuh5WhpDEyWGuEumaS8C6PZ/tg2QZPD1jfwQiITm7dEwPLurj77t0KzAbqK7g1XotTMNePS2XTDCepLKxoQuA/m+nye+86tSavGikgFIyBCu5jeMPkFZQCbEXYS6DQQRdQcnAl1ATEIwvVVmaYsFD1MnHKn92Vf1vqvirbrQaihp6BKqDUQSdQiLAXYCuHjoBobNsBXKQE0QSUtRQAAAAASUVORK5CYII="},,function(t,e,o){t.exports=o(21)},,,,,function(t,e,o){},function(t,e,o){},function(t,e,o){"use strict";o.r(e);var a=o(0),A=o.n(a),n=o(9),s=o.n(n),i=(o(19),o(20),o(1)),r=o(2),l=o(4),h=o(3),c=o(5),d=o(10),b=o.n(d),u=o(11),m=o.n(u),g=o(7),v=o.n(g);var p=function(t){var e={width:t.windowWidth,height:t.windowHeight,top:t.top,left:t.left,position:"absolute"};return A.a.createElement("img",{src:t.backgroundImage,style:e,onMouseDown:t.onMouseDown,alt:""})};var R=function(t){var e=Math.round(t.centreX-t.width/2),o=Math.round(t.centreY-t.height/2),a={width:"calc(".concat(t.width,"px)"),height:"calc(".concat(t.height,"px)"),top:"calc(".concat(o,"px)"),left:"calc(".concat(e,"px)"),position:"absolute",transform:"rotate(".concat(t.rotation,"rad)"),zIndex:1};return A.a.createElement("img",{src:t.robotImage,style:a,alt:""})},f=function(t){function e(t){var o;return Object(i.a)(this,e),(o=Object(l.a)(this,Object(h.a)(e).call(this,t))).state={bgStyle:{width:t.width,height:t.height,top:t.top,left:t.left,position:"absolute"},text:t.text},o}return Object(c.a)(e,t),Object(r.a)(e,[{key:"addLine",value:function(t){console.log("adding line: "+t),this.setState({text:this.state.text+t})}},{key:"componentDidUpdate",value:function(){this.refs.elem.scrollTop=this.refs.elem.scrollHeight}},{key:"render",value:function(){return A.a.createElement("div",{className:"terminal",style:this.state.bgStyle,ref:"elem"},this.state.text.split("\n").map((function(t,e){return A.a.createElement("div",{align:"left",key:e},t)})))}}]),e}(A.a.Component),x=o(12),w=o.n(x);var y=function(t){var e=Math.round(t.centreX-t.radius/2),o=Math.round(t.centreY-t.radius/2),a={width:"calc(".concat(t.radius,"px)"),height:"calc(".concat(t.radius,"px)"),top:"calc(".concat(o,"px)"),left:"calc(".concat(e,"px)"),position:"absolute",zIndex:2};return A.a.createElement("img",{src:w.a,style:a,alt:""})},k=o(13),P=o(6),I=function(t){function e(t){var o;return Object(i.a)(this,e),(o=Object(l.a)(this,Object(h.a)(e).call(this,t))).state={robot2:!0,robot1:!0,robot3:!0,manual2:!0,manual3:!0},o.yggdrasilUrl="http://localhost:8080",o.ws=t.websocket,o.handleInputChange=o.handleInputChange.bind(Object(P.a)(o)),o}return Object(c.a)(e,t),Object(r.a)(e,[{key:"updateRobot2",value:function(t){var e=new XMLHttpRequest;e.addEventListener("load",(function(){console.log("Received response from Yggdrasil:"),console.log(e.responseText)}));var o=this.constructUrl("/artifacts/robot2"),a='@prefix eve: <http://w3id.org/eve#> .\n\n      <http://localhost:8080/artifacts/robot2>\n        a eve:Artifact ;\n        eve:hasName "Robot2" ;\n        eve:isRobot "Robot2" ;\n        eve:hasCartagoArtifact "www.Robot2" .\n      ';t&&(a='@prefix eve: <http://w3id.org/eve#> .\n        <http://localhost:8080/artifacts/robot2>\n          a eve:Artifact ;\n          eve:hasName "Robot2" ;\n          eve:isRobot "Robot2" ;\n          eve:hasCartagoArtifact "www.Robot2" ;\n          eve:hasManual [ eve:hasName "driverManual" ;\n          eve:hasUsageProtocol [\n            eve:hasName "loadAndDrive" ;\n            eve:hasFunction "drive(X1,Y1,X2,Y2)" ;\n            eve:hasPrecondition "true" ;\n            eve:hasBody " move(X1,Y1);\n                    load;\n                    move(X2,Y2);\n                    unload "\n          ]\n          ].'),e.open("PUT",o),e.setRequestHeader("content-type","text/turtle"),e.setRequestHeader("slug","robot2"),e.send(a)}},{key:"createRobot",value:function(t,e){var o,a=this.constructUrl("/artifacts");console.log("dispatching request to "+a),1===e?o='@prefix eve: <http://w3id.org/eve#> .\n        <>\n            a eve:Artifact ;\n            eve:hasName "Robot1" ;\n            eve:isRobot "Robot1" ;\n            eve:hasCartagoArtifact "www.Robot1" .':2===e?o='@prefix eve: <http://w3id.org/eve#> .\n        <http://localhost:8080/artifacts/robot2>\n          a eve:Artifact ;\n          eve:hasName "Robot2" ;\n          eve:isRobot "Robot2" ;\n          eve:hasCartagoArtifact "www.Robot2" ;\n          eve:hasManual [ eve:hasName "driverManual" ;\n          eve:hasUsageProtocol [\n            eve:hasName "loadAndDrive" ;\n            eve:hasFunction "drive(X1,Y1,X2,Y2)" ;\n            eve:hasPrecondition "true" ;\n            eve:hasBody " move(X1,Y1);\n                    load;\n                    move(X2,Y2);\n                    unload "\n          ]\n          ].':3===e&&(o='@prefix td: <http://www.w3.org/ns/td#> .\n        @prefix xsd: <http://www.w3.org/2001/XMLSchema#> .\n        @prefix iot: <http://iotschema.org/> .\n        @prefix http: <http://iotschema.org/protocol/http> .\n        @prefix eve: <http://w3id.org/eve#> .\n        @prefix ex: <http://example.com/> .\n\n        <http://localhost:8080/artifacts/robot3>\n          a td:Thing, eve:Artifact;\n          td:name "Robot3"^^xsd:string ;\n          td:base "http://192.168.2.50/"^^xsd:anyURI ;\n          td:interaction  [\n            a td:Action, ex:Base ;\n            td:name "Base"^^xsd:string ;\n            td:form [\n              http:methodName "PUT"^^xsd:string ;\n              td:href "https://api.interactions.ics.unisg.ch/leubot/wrist/rotation"^^xsd:anyURI ;\n              td:mediaType "application/json"^^xsd:string ;\n              td:rel "invokeAction"^^xsd:string\n            ] ;\n            td:inputSchema [\n              td:schemaType td:Object ;\n              td:field [\n                td:name "token"^^xsd:string ;\n                td:schema [ td:schemaType td:Boolean; td:const "\\"c347b252a29f75104fb47b10b4e75e5c\\"" ]\n              ] ;\n             td:field [\n                td:name "value"^^xsd:string ;\n                td:schema [ a ex:Value ; td:schemaType td:Number ]\n              ]\n            ]\n           ];\n           td:interaction  [\n            a td:Action, ex:Gripper ;\n            td:name "Gripper"^^xsd:string ;\n            td:form [\n              http:methodName "PUT"^^xsd:string ;\n              td:href "https://api.interactions.ics.unisg.ch/leubot/gripper"^^xsd:anyURI ;\n              td:mediaType "application/json"^^xsd:string ;\n              td:rel "invokeAction"^^xsd:string\n            ] ;\n            td:inputSchema [\n              td:schemaType td:Object ;\n              td:field [\n                td:name "value"^^xsd:string ;\n                td:schema [ a ex:Value ; td:schemaType td:Number ]\n              ]\n            ]\n          ].\n        '),t.open("POST",a),t.setRequestHeader("content-type","text/turtle"),t.setRequestHeader("slug","robot"+e),t.send(o)}},{key:"removeRobot",value:function(t,e){t.open("DELETE",this.constructUrl("/artifacts/robot"+e)),t.send()}},{key:"updateWorkspace",value:function(){var t=new XMLHttpRequest,e=this.constructUrl("/workspaces"),o='@prefix eve: <http://w3id.org/eve#> .\n      <>\n          a eve:Workspace;\n          eve:hasName "interactionsWksp";';this.state.robot1&&(o+="\n        eve:contains <http://localhost:8080/artifacts/robot1>;"),this.state.robot2&&(o+="\n        eve:contains <http://localhost:8080/artifacts/robot2>;"),this.state.robot3&&(o+="\n        eve:contains <http://localhost:8080/artifacts/robot3>;"),this.state.manual3&&(o+="\n        eve:contains <http://localhost:8080/manuals/phantomXmanual>"),o+=".",console.log("sending payload: "+o),t.open("POST",e),t.setRequestHeader("content-type","text/turtle"),t.setRequestHeader("slug","interactionsWksp"),t.send(o)}},{key:"constructUrl",value:function(t){return this.yggdrasilUrl+t}},{key:"changeManual",value:function(t,e,o){var a={jacamo:{changeManual:{name:t,enabled:e}}};if(this.ws.send(JSON.stringify(a)),"manual2"===t)this.setState({manual2:e}),o&&this.updateRobot2(e);else if("manual3"===t){this.setState({manual3:e});var A=new XMLHttpRequest;if(A.addEventListener("load",(function(){console.log("Received response from Yggdrasil:"),console.log(A.responseText)})),e){A.open("POST",this.constructUrl("/manuals")),A.setRequestHeader("content-type","text/turtle"),A.setRequestHeader("slug","phantomXmanual"),A.send('@prefix eve: <http://w3id.org/eve#> .\n\n          <http://localhost:8080/manuals/phantomXmanual> a eve:Manual ;\n              eve:hasName "phantomXmanual" ;\n              eve:explains <http://localhost:8080/artifacts/robot3> ;\n              eve:hasUsageProtocol [\n                eve:hasName "deliver" ;\n                eve:hasFunction "pickAndPlace(D1,D2)" ;\n                eve:hasPrecondition "true" ;\n                eve:hasBody " -+rotating(\\"Robot3\\",D1); -+grasping(\\"Robot3\\"); -+rotating(\\"Robot3\\",D2); -+releasing(\\"Robot3\\") "\n              ] .')}else A.open("DELETE",this.constructUrl("/manuals/phantomXmanual")),A.send()}}},{key:"handleInputChange",value:function(t){var e,o=t.target,a=o.checked,A=o.name;e=A.startsWith("manual")?{jacamo:{changeManual:{name:A,enabled:a}}}:{jacamo:{changeArtifact:{name:A,enabled:a}}},console.log("setting "+A+" enabled: "+a),this.ws.send(JSON.stringify(e)),console.log("preparing request to yggdrasil...");var n=new XMLHttpRequest;switch(n.addEventListener("load",(function(){console.log("Received response from Yggdrasil:"),console.log(n.responseText)})),A){case"robot1":a?this.createRobot(n,1):this.removeRobot(n,1);break;case"robot2":this.changeManual("manual2",a),a?this.createRobot(n,2):this.removeRobot(n,2);break;case"robot3":this.changeManual("manual3",a),a?this.createRobot(n,3):this.removeRobot(n,3);break;case"manual2":this.changeManual(A,a,!0);break;case"manual3":this.changeManual(A,a,!1);break;default:console.log("unexpected name: "+A)}this.setState(Object(k.a)({},A,a),(function(){console.log("state is updated, updating workspace "+a),console.log(this.state),this.updateWorkspace()}))}},{key:"render",value:function(){return A.a.createElement("form",{className:"leftbound"},A.a.createElement("label",{className:"marginRight"},"Driver Robot:",A.a.createElement("input",{name:"robot2",type:"checkbox",checked:this.state.robot2,onChange:this.handleInputChange})),A.a.createElement("label",{className:"marginRight"},"Robot Arm 1:",A.a.createElement("input",{name:"robot1",type:"checkbox",checked:this.state.robot1,onChange:this.handleInputChange})),A.a.createElement("label",null,"Robot Arm 2:",A.a.createElement("input",{name:"robot3",type:"checkbox",checked:this.state.robot3,onChange:this.handleInputChange})),A.a.createElement("br",null),A.a.createElement("label",{className:"largeMarginRight"},"Manual:",A.a.createElement("input",{name:"manual2",type:"checkbox",checked:this.state.manual2,onChange:this.handleInputChange})),A.a.createElement("label",null,"Manual:",A.a.createElement("input",{name:"manual3",type:"checkbox",checked:this.state.manual3,onChange:this.handleInputChange})))}}]),e}(A.a.Component),E=function(t){function e(t){var o;return Object(i.a)(this,e),(o=Object(l.a)(this,Object(h.a)(e).call(this,t))).ws=new WebSocket("ws://localhost:8080"),o.state={driverPos:{x:300,y:200},driverGoal:{x:300,y:200},driverRotation:0,driverBallLoaded:!1,driverBallAttached:!1,robotArm1Pos:{x:250,y:400},robotArm1Rotation:0,robotArm1RotationGoal:0,robotArm1BallAttached:!1,robotArm2Pos:{x:550,y:400},robotArm2Rotation:0,robotArm2RotationGoal:0,robotArm2BallAttached:!1,ballPos:{x:615,y:400},windowWidth:800,windowHeight:600,terminalText:""},o.driverWidth=25,o.driverHeight=25,o.driverSpeed=.1,o.ballDestination={x:615,y:400},o.ballRadius=15,o.robotArmWidth=120,o.robotArmHeight=17,o.robotArmRotationStep=.05,o.TerminalElement=A.a.createRef(),o}return Object(c.a)(e,t),Object(r.a)(e,[{key:"_onMouseDown",value:function(t){if(this.ballAtDestination()){this.setState({ballPos:{x:t.nativeEvent.offsetX,y:t.nativeEvent.offsetY}});var e={jacamo:{placeObject:{x:t.nativeEvent.offsetX,y:t.nativeEvent.offsetY}}};this.ws.send(JSON.stringify(e))}else console.log("ball not at destination: x="+this.state.ballPos.x+" y="+this.state.ballPos.y)}},{key:"ballAtDestination",value:function(){return this.state.ballPos.x===this.ballDestination.x&&this.state.ballPos.y===this.ballDestination.y}},{key:"isRightRotationCloser",value:function(t,e){return e>t&&e-t<Math.PI||e<t&&t-e>Math.PI}},{key:"driverGoalReached",value:function(){return Math.abs(this.state.driverPos.x-this.state.driverGoal.x)<5&&Math.abs(this.state.driverPos.y-this.state.driverGoal.y)<5}},{key:"rotationGoalReached",value:function(t,e){return Math.abs(t-e)<.05}},{key:"addTerminalLine",value:function(t,e){var o="["+t+"]: "+e+"\n";this.setState({terminalText:this.state.terminalText+o}),this.TerminalElement.current.addLine(o)}},{key:"getBallPositionWithRotationAndRadius",value:function(t,e,o){return{x:o.x+Math.cos(t)*e,y:o.y+Math.sin(t)*e}}},{key:"moveDriverTowardsGoal",value:function(t){var e=this.state.driverGoal.x-this.state.driverPos.x,o=this.state.driverGoal.y-this.state.driverPos.y,a={x:this.state.driverPos.x+e*t,y:this.state.driverPos.y+o*t};this.state.driverBallLoaded?this.setState({driverPos:a,ballPos:a}):this.state.driverBallAttached?this.setState({driverPos:a,ballPos:this.getBallPositionWithRotationAndRadius(this.state.driverRotation-Math.PI/2,this.driverWidth/2+this.ballRadius,a)}):this.setState({driverPos:a})}},{key:"getNewRotation",value:function(t,e,o){var a;return this.isRightRotationCloser(t,e)?a=(t+o)%(2*Math.PI):(a=(t-o)%(2*Math.PI))<0&&(a=2*Math.PI),a}},{key:"getBallPositionAtRobotArm",value:function(t,e){return this.getBallPositionWithRotationAndRadius(t,this.robotArmWidth/2-5,e)}},{key:"handleMessage",value:function(t){switch(Object.keys(t)[0]){case"robot1":switch(Object.keys(t.robot1)[0]){case"rotate":this.setState({robotArm1RotationGoal:t.robot1.rotate.degrees*Math.PI/180});break;case"grasp":t.robot1.grasp?(console.log("robot1 grasps ball"),this.setState({robotArm1BallAttached:!0,ballPos:this.getBallPositionAtRobotArm(this.state.robotArm1Rotation,this.state.robotArm1Pos)})):(console.log("robot1 releases ball"),this.setState({robotArm1BallAttached:!1}));break;default:console.log("unable to process json message: "+t)}break;case"robot2":switch(Object.keys(t.robot2)[0]){case"move":var e=Math.atan2(t.robot2.move.y-this.state.driverPos.y,t.robot2.move.x-this.state.driverPos.x)+Math.PI/2;console.log("setting driverGoal and Rotation: "+e+" from current rotation: "+this.state.driverRotation),this.setState({driverGoal:{x:t.robot2.move.x,y:t.robot2.move.y},driverRotation:e});break;case"load":this.setState({driverBallLoaded:!0,ballPos:this.state.driverPos});break;case"attach":console.log("attaching ball to driver robot..."),this.setState({driverBallAttached:!0,ballPos:this.getBallPositionWithRotationAndRadius(this.state.driverRotation-Math.PI/2,this.driverWidth/2+this.ballRadius,this.state.driverPos)});break;case"release":this.setState({driverBallLoaded:!1,driverBallAttached:!1});break;default:console.log("unable to process json message: "+t)}break;case"robot3":switch(Object.keys(t.robot3)[0]){case"rotate":this.setState({robotArm2RotationGoal:t.robot3.rotate.degrees*Math.PI/180});break;case"grasp":t.robot3.grasp?(console.log("robot3 grasps ball"),this.setState({robotArm2BallAttached:!0,ballPos:this.getBallPositionAtRobotArm(this.state.robotArm2Rotation,this.state.robotArm2Pos)})):(console.log("robot3 releases ball"),this.setState({robotArm2BallAttached:!1}),Math.abs(this.state.robotArm2Rotation)<=.05&&(console.log("Ball has reached destination!"),this.setState({ballPos:this.ballDestination})));break;default:console.log("unable to process json message: "+JSON.stringify(t))}break;case"terminal":console.log("received log message"),this.addTerminalLine(t.terminal.origin,t.terminal.message);break;default:console.log("invalid json message: "+JSON.stringify(t))}}},{key:"gameLoop",value:function(){if(this.driverGoalReached()||(console.log("driverRobot has not yet reached its goal, moving into direciton of goal..."),this.moveDriverTowardsGoal(this.driverSpeed)),!this.rotationGoalReached(this.state.robotArm1Rotation,this.state.robotArm1RotationGoal)){var t=this.getNewRotation(this.state.robotArm1Rotation,this.state.robotArm1RotationGoal,this.robotArmRotationStep);console.log("RobotArm1 has not yet reached its goal, moving arm into direction of goal. Rotating to "+t),this.state.robotArm1BallAttached?this.setState({ballPos:this.getBallPositionAtRobotArm(this.state.robotArm1Rotation,this.state.robotArm1Pos),robotArm1Rotation:t}):this.setState({robotArm1Rotation:t})}if(!this.rotationGoalReached(this.state.robotArm2Rotation,this.state.robotArm2RotationGoal)){var e=this.getNewRotation(this.state.robotArm2Rotation,this.state.robotArm2RotationGoal,this.robotArmRotationStep);console.log("RobotArm2 has not yet reached its goal, moving arm into direction of goal. Rotating to "+e),this.state.robotArm2BallAttached?this.setState({ballPos:this.getBallPositionAtRobotArm(this.state.robotArm2Rotation,this.state.robotArm2Pos),robotArm2Rotation:e}):this.setState({robotArm2Rotation:e})}}},{key:"componentDidMount",value:function(){var t=this;this.intervalId=setInterval(this.gameLoop.bind(this),10),this.ws.onopen=function(){console.log("websocket connected.")},this.ws.onmessage=function(e){console.log(e.data);var o=JSON.parse(e.data);console.log(o),t.handleMessage(o)},this.ws.onclose=function(){console.log("websocket disconnected.")}}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"render",value:function(){return A.a.createElement("div",{tabIndex:"0"},A.a.createElement("div",{className:"background"},A.a.createElement(p,{backgroundImage:b.a,onMouseDown:this._onMouseDown.bind(this),windowWidth:this.state.windowWidth,windowHeight:this.state.windowHeight,top:0,left:0})),A.a.createElement("div",{className:"configsection"},A.a.createElement(I,{websocket:this.ws})),A.a.createElement(y,{centreX:this.state.ballPos.x,centreY:this.state.ballPos.y,radius:this.ballRadius}),A.a.createElement(R,{robotImage:m.a,centreX:this.state.driverPos.x,centreY:this.state.driverPos.y,width:this.driverWidth,height:this.driverHeight,rotation:this.state.driverRotation}),A.a.createElement(R,{robotImage:v.a,centreX:this.state.robotArm1Pos.x,centreY:this.state.robotArm1Pos.y,width:this.robotArmWidth,height:this.robotArmHeight,rotation:this.state.robotArm1Rotation}),A.a.createElement(R,{robotImage:v.a,centreX:this.state.robotArm2Pos.x,centreY:this.state.robotArm2Pos.y,width:this.robotArmWidth,height:this.robotArmHeight,rotation:this.state.robotArm2Rotation}),A.a.createElement(f,{ref:this.TerminalElement,top:0,left:this.state.windowWidth,width:window.innerWidth-this.state.windowWidth,height:this.state.windowHeight,text:this.state.terminalText}))}}]),e}(A.a.Component);var M=function(){return A.a.createElement("div",{className:"App"},A.a.createElement(E,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(A.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}],[[14,1,2]]]);
//# sourceMappingURL=main.68c37766.chunk.js.map